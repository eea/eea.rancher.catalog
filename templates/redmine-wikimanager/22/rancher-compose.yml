version: '2'
catalog:
  name: "Redmine wiki manager"
  description: "Enriches redmine wikis."
  version: "2.1"
  minimum_rancher_version: "v1.2.0"
  questions:
    - variable: "RANCHER_CONFIG"
      label: "Rancher configuration"
      description: "Multiline, with the format - rancher url, access key, secret key ( separated by commas)"
      type: "multiline"
    - variable: "SVN_USER"
      label: "SVN readonly user"
      description: "Used to read docker-compose.yml"
      type: "string"
    - variable: "SVN_PASSWORD"
      label: "SVN user password"
      description: "Used to read docker-compose.yml"
      type: "password"
    - variable: "GITHUB_TOKEN"
      label: "GITHUB token"
      description: "Needs read on public repos, used to read docker-compose.yml"
      type: "password"
    - variable: "DOCKERHUB_USER"
      label: "Dockerhub user"
      description: "Used to read docker images build information"
      type: "string"
    - variable: "DOCKERHUB_PASS"
      label: "Dockerhub user password"
      description: "Used to read docker images build information"
      type: "password"      
    - variable: "RUN_SCHEDULE"
      label: "Crontab schedule (UTC)"
      default: "0 0 3 * * *"
      type: "string"
    - variable: "WIKI_SERVER"
      label: "Redmine url"
      default: "https://taskman.eionet.europa.eu/"
      description: "The main url of the redmine instance, if not given will export the result in STDOUT"
      type: "string"
    - variable: "WIKI_APIKEY"
      label: "Redmine API key"
      description: "Belongs to the user that will update the wiki pages, if not given will export the result in STDOUT"
      type: "password"
    - variable: "WIKI_PROJECT"
      label: "Redmine wiki project"
      description: "The redmine project where the wiki pages are, if not given will export the result in STDOUT"
      type: "string"
    - variable: "WIKI_HOSTS_PAGE"
      label: "Redmine wiki hosts page"
      default: "RancherHosts"
      type: "string"
    - variable: "WIKI_STACKS_PAGE"
      label: "Redmine wiki stacks page"
      default: "RancherStacks"
      type: "string"
    - variable: "WIKI_CONTAINERS_PAGE"
      label: "Redmine wiki containers page"
      default: "RancherContainers"
      type: "string"
    - variable: "GITLAB_CONFIG"
      label: "Gitlab url"
      description: "Used to backup stacks"
      type: "string"
    - variable: "ENV_PATH"
      label: "Path to the environment variables file"
      description: "Overwrites environment variables"
      default: "/data/environment"
      type: "string"
    - variable: "DATA_VOLUME"
      label: "DATA volume name"
      description: "Volume name (without '-' if using netapp volume driver)"
      default: "wikiman_data"
      type: "string"
      required: true
    - variable: "DATA_VOLUMEDRIVER"
      label: "Data volume driver"
      default: "netapp"
      type: "enum"
      options:
      - "rancher-ebs"
      - "rancher-nfs"
      - "netapp"
      required: true
    - variable: "DATA_VOLUME_EXTERNAL"
      label: "Data volume environment scoped (external)"
      description: "External volume needs to be created in advance"
      default: "yes"
      type: "enum"
      options:
      - "yes"
      - "no" 
    - variable: "DATA_VOLUMEDRIVER_OPTS"
      label: "Data volume driver options"
      description: |
          Specify "driver_opts" key/value pair in the format "optionName: optionValue".
          E.g. for the `rancher-ebs` driver you should specify the required 'size' option like this: "size: 1".
      type: "multiline"      
    - variable: "LOGS_VOLUME"
      label: "LOGS volume name"
      description: "Volume name (without '-' if using netapp volume driver)"
      default: "wikiman_logs"
      type: "string"
      required: true
    - variable: "LOGS_VOLUMEDRIVER"
      label: "Logs volume driver"
      default: "netapp"
      type: "enum"
      options:
      - "rancher-ebs"
      - "rancher-nfs"
      - "netapp"
      required: true
    - variable: "LOGS_VOLUME_EXTERNAL"
      label: "Logs volume environment scoped (external)"
      description: "External volume needs to be created in advance"
      default: "yes"
      type: "enum"
      options:
      - "yes"
      - "no"
    - variable: "LOGS_VOLUMEDRIVER_OPTS"
      label: "Logs volume driver options"
      description: |
          Specify "driver_opts" key/value pair in the format "optionName: optionValue".
          E.g. for the `rancher-ebs` driver you should specify the required 'size' option like this: "size: 1".
      type: "multiline"
      default: |
          size: 1
    - variable: "DEBUG_ON"
      label: "Debug on"
      default: "No"
      description: "Choose Yes to enable debug logging"
      type: "enum"
      options:
      - "Yes"
      - "No"
    - variable: "TZ"
      label: "Time zone"
      description: "Time zone"
      default: "Europe/Copenhagen"
      required: true
      type: "string"


      
